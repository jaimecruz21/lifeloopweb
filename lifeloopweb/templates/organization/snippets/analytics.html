{% from '_macros/global.html' import render_card %}

<!-- Analytics 1 of 3 -->
<div class="row no-gutters flex-row flex-wrap mb-lg-2 collapse analytics-collapse" id="org-edit-db-analytics">
    <div class="col-12 col-lg page-header p-2 mb-3 mr-0 mr-lg-3 row no-gutters d-flex align-items-center align-items-stretch">
        <div class="col pr-2 d-flex align-items-center">
            <canvas id="total_members" style="width: 120px; height: 50px;"
                    data-set='{{ charts['total_members']['data']|tojson|safe }}'
                    data-max='{{ charts['total_members']['max'] }}'
                    data-labels='{{ charts['total_members']['labels']|tojson|safe }}'></canvas>
        </div>
        <div class="col pl-2 d-flex flex-column align-items-start">
            <small class="text-secondary text-uppercase" style="font-size: 10px;">Total members</small>
            <h3 class="m-0 total">{{ charts['total_members']['total'] }}</h3>
        </div>
    </div>
    <div class="col-12 col-lg page-header p-2 mb-3 mr-0 mr-lg-3 row no-gutters d-flex align-items-center align-items-stretch">
        <div class="col pr-2 d-flex align-items-center">
            <canvas id="new_members" style="width: 120px; height: 50px;"
                    data-set='{{ charts['new_members']['data']|tojson|safe }}'
                    data-max='{{ charts['new_members']['max'] }}'
                    data-labels='{{ charts['new_members']['labels']|tojson|safe }}'></canvas>
        </div>
        <div class="col pl-2 d-flex flex-column align-items-start">
            <small class="text-secondary text-uppercase" style="font-size: 10px;">New members</small>
            <h3 class="m-0 total">{{ charts['new_members']['total'] }}</h3>

            <div style="font-size: 10px !important; color: #a7a7a9 !important;">
                {% with form=wtforms['chart_filter'], org_id=org.id, selected=2 %}
                    {% include '_partials/chart_filter.html' %}
                {% endwith %}
            </div>
        </div>
    </div>
    <div class="col-12 col-lg page-header p-2 mb-3 mr-0 mr-lg-3 row no-gutters d-flex align-items-center align-items-stretch">
        <div class="col pr-2 d-flex align-items-center">
            <canvas id="active_members" style="width: 120px; height: 50px;"
                    data-set='{{ charts['active_members']['data']|tojson|safe }}'
                    data-labels='{{ charts['active_members']['labels']|tojson|safe }}'></canvas>
        </div>
        <div class="col pl-2 d-flex flex-column align-items-start">
            <small class="text-secondary text-uppercase" style="font-size: 10px;">Active members</small>
            <h3 class="m-0 total">{{ charts['active_members']['total'] }}</h3>

            <div style="font-size: 10px !important; color: #a7a7a9 !important;">
                {% with form=wtforms['chart_filter'], org_id=org.id, selected=2 %}
                    {% include '_partials/chart_filter.html' %}
                {% endwith %}
            </div>
        </div>
    </div>
    <div class="col-12 col-lg page-header p-2 mb-3 mr-0 mr-lg-3 row no-gutters d-flex align-items-center align-items-stretch">
        <div class="col pr-2 d-flex align-items-center">
            <canvas id="video_sessions" style="width: 120px; height: 50px;"
                    data-set='{{ charts['video_sessions']['data']|tojson|safe }}'
                    data-labels='{{ charts['video_sessions']['labels']|tojson|safe }}'></canvas>
        </div>
        <div class="col pl-2 d-flex flex-column align-items-start">
            <small class="text-secondary text-uppercase" style="font-size: 10px;">Video Sessions</small>
            <h3 class="m-0 total">{{ charts['video_sessions']['total'] }}</h3>

            <div style="font-size: 10px !important; color: #a7a7a9 !important;">
                {% with form=wtforms['chart_filter'], org_id=org.id, selected=2 %}
                    {% include '_partials/chart_filter.html' %}
                {% endwith %}
            </div>
        </div>
    </div>
    <div class="col-12 col-lg page-header p-2 mb-3 row no-gutters d-flex align-items-stretch">
        <div class="col pr-2 d-flex align-items-center">
            <canvas id="new_groups" style="width: 120px; height: 50px;"
                    data-set='{{ charts['new_groups']['data']|tojson|safe }}'
                    data-max='{{ charts['new_groups']['max'] }}'
                    data-labels='{{ charts['new_groups']['labels']|tojson|safe }}'></canvas>
        </div>
        <div class="col pl-2 d-flex flex-column align-items-start">
            <small class="text-secondary text-uppercase" style="font-size: 10px;">New Groups</small>
            <h3 class="m-0 total">{{ charts['new_groups']['total'] }}</h3>

            <div style="font-size: 10px !important; color: #a7a7a9 !important;">
                {% with form=wtforms['chart_filter'], org_id=org.id, selected=2 %}
                    {% include '_partials/chart_filter.html' %}
                {% endwith %}
            </div>
        </div>
    </div>
</div>
<!-- Analytics 2 of 3 -->
<div class="row no-gutters mb-4 collapse analytics-collapse" id="org-edit-google-analytics1">
    <div class="col-12 col-lg-8 pr-lg-2 mb-4 mb-lg-0">
        {# max-height: 454px; #}
        {% call render_card('Total Group meetings', class='h-100', subheader=' ', body='scrollable') %}
        {% endcall %}
    </div>
    <div class="col-12 col-lg-4 pl-lg-2">
        <div class="card w-100 h-100" id="visits_wrapper">
            <div class="card-header bg-info text-white d-flex align-items-center justify-content-between">
                Peak times

                <div class="d-flex">
                    <a href="#" id="visits_toggle" class="text-white mr-4">AM</a>

                    {% with form=wtforms['chart_filter'], org_id=org.id, selected=1 %}
                        {% include '_partials/chart_filter.html' %}
                    {% endwith %}
                </div>
            </div>

            <div class="card-body p-3 mh-100">
                <canvas id="visits" width="100" height="80"
                        data-am='{{ charts['visits']['data'][0]|tojson|safe }}'
                        data-pm='{{ charts['visits']['data'][1]|tojson|safe }}'
                        data-labels='{{ charts['visits']['labels']|tojson|safe }}'></canvas>
            </div>
        </div>
    </div>
</div>
<!-- Analytics 3 of 3 -->
<div class="row no-gutters mb-4 collapse analytics-collapse" id="org-edit-google-analytics2">
    <div class="col-12 col-lg-8 pr-lg-2 mb-4 mb-lg-0">
        <div class="card w-100 h-100" id="sex_age_wrapper">
            <div class="card-header bg-info text-white d-flex align-items-center justify-content-between">
                Sex / Age

                {% with form=wtforms['chart_filter'], org_id=org.id, selected=1 %}
                    {% include '_partials/chart_filter.html' %}
                {% endwith %}
            </div>

            <div class="card-body p-3 mh-100">
                <canvas id="sex_age" class="d-block" width="100" height="33"
                        data-men='{{ charts['sex_age']['data'][0]|tojson|safe }}'
                        data-men-total='{{ charts['sex_age']['male_total'] }}'
                        data-women='{{ charts['sex_age']['data'][1]|tojson|safe }}'
                        data-women-total='{{ charts['sex_age']['female_total'] }}'
                        data-labels='{{ charts['sex_age']['labels']|tojson|safe }}'></canvas>
            </div>
        </div>
    </div>
    <div class="col-12 col-lg-4 pl-lg-2">
        <div class="card w-100 h-100" id="country_wrapper">
            <div class="card-header bg-info text-white d-flex align-items-center justify-content-between">
                Visitor Analytics

                {% with form=wtforms['chart_filter'], org_id=org.id, selected=1 %}
                    {% include '_partials/chart_filter.html' %}
                {% endwith %}
            </div>

            <div class="card-body px-5 py-3 mh-100">
                <canvas id="country" width="100" height="80"
                        data-set='{{ charts['country']['data']|tojson|safe }}'
                        data-labels='{{ charts['country']['labels']|tojson|safe }}'></canvas>
            </div>
        </div>
    </div>
</div>
